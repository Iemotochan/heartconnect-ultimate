# CLAUDE.md

This file provides guidance to Claude Code (claude.ai/code) when working with code in this repository.

## 重要な指示
**このプロジェクトでは日本語で回答してください。**

## プロジェクト概要

このプロジェクトは「HeartConnect」という恋愛系質問カードアプリの開発です。カップルや意中の相手との距離を段階的に縮めていく質問カードアプリで、以下の特徴があります：

- 9段階のレベルシステム（軽い話題から親密な話題まで）
- シャドウモード（大人向けの刺激的な質問、パスワード：alcohol）
- ビジュアルエフェクト（タッチでハートが弾ける、レベルごとの色変化）
- 応答システム（はい/いいえ/うーん、または感情カードで反応）

## ビジュアル仕様

### レベルごとの色変化
- レベル1-2: 淡いピンク系 #FFF0F5 → #FFE4E1
- レベル3-4: ピンク系 #FFC0CB → #FFB6C1
- レベル5-6: 濃いピンク系 #FF69B4 → #FF1493
- レベル7-8: ローズ系 #C71585 → #DC143C
- レベル9: 深紅系 #8B0000

### 実装すべきビジュアル効果
1. **ハートエフェクト**: カードタッチ時に10-20個のハートが放射状に広がる
2. **カードアニメーション**: スライド＋フェード（0.3秒）
3. **ホバー効果**: 軽い浮遊感＋影の強調
4. **背景**: レベルに応じたグラデーションアニメーション
5. **パーティクルエフェクト**: 常時浮遊するハートパーティクル

## 開発時の注意点

### 質問データの管理
- 各レベルごとに最低20問以上の質問を用意
- レベル7-9はシャドウモード（アダルトコンテンツ）として実装
- 質問はJSONまたはデータベースで管理

### 機能実装の優先順位
1. 基本的な質問カード表示機能
2. レベルシステムとプログレス管理
3. ビジュアルエフェクト（ハート、アニメーション）
4. 応答システムとマッチ度計算
5. シャドウモードの実装（パスワード保護）
6. 追加機能（カスタマイズ、分析、シェア）

### 技術スタック推奨
- フロントエンド: React/Next.js または Vue.js
- アニメーション: Framer Motion または GSAP
- スタイリング: Tailwind CSS または styled-components
- 状態管理: Zustand または Redux Toolkit
- データ保存: LocalStorage または IndexedDB

### パフォーマンス考慮事項
- パーティクルエフェクトは軽量に実装（requestAnimationFrame使用）
- 質問データは遅延読み込み
- アニメーションはGPU加速を活用

## 最新の開発状況

### 完了済み機能
1. ✅ React + Viteでの基本アプリケーション構築
2. ✅ 9レベルの質問システム（通常モード・ユニークモード）
3. ✅ シャドウモード（パスワード：alcohol）
4. ✅ Apple風のゴージャスなデザイン（glassmorphism効果）
5. ✅ リアクションボタンシステム（共感、秘密、好奇心など）
6. ✅ SVGグラフィックパーティクル（星・ハート・炎のイメージベース）
7. ✅ CORS問題の解決とモバイル対応
8. ✅ プロフェッショナルなファイル構造への移行開始

### 現在の技術スタック
- React 18 + Vite
- Framer Motion（アニメーション）
- Zustand（状態管理）
- CSS Modules（モジュラースタイリング）

### ファイル構造（進行中）
```
/css/
  ├── base.css (タイポグラフィ・基本スタイル)
  ├── animations.css (キーフレームアニメーション)
  ├── background.css (背景・パーティクルスタイル)
  ├── components.css (カード・UIコンポーネント)
  ├── buttons.css (ボタンスタイル)
  └── effects.css (パーティクル・視覚効果)

/js/
  ├── config.js (設定定数・レベル閾値)
  ├── questions.js (質問データベース)
  └── (他のモジュールファイル作成予定)

/image/
  ├── 1.png (レベル1-5用のハート画像)
  ├── 2.png (レベル6-9用のハート画像)
  └── back.png (背景画像)
```

### 実装済みの主要機能詳細
- **グラスモーフィズム UI**: 透明感とぼかし効果で高級感を演出
- **レベル連動パーティクル**: レベル1-2は星、3+はハート、レベルごとの色変化
- **パスワード保護**: シャドウモードへの適切なアクセス制御
- **モバイル最適化**: レスポンシブデザインとタッチ操作

### 最新の実装完了事項 (2025/6/11)

**🎯 タッチエフェクトシステムの完全リニューアル**
- ✅ **画面全体タッチエフェクト**: 画面のどこをタッチしてもパーティクルが発生（ボタン機能は干渉しない）
- ✅ **放射状パーティクル拡散**: 螺旋状から花開くような放射状パターンに変更
- ✅ **高精度タッチ位置取得**: starfield-effect.jsの技法を参考にした正確な座標取得
- ✅ **統一エフェクトシステム**: タッチ・マウス両対応の一貫したパーティクル生成

**🔧 技術実装詳細**
- `handleGlobalTouchStart()`: 全画面タッチ検出システム
- `createGlobalHeartBurst()`: 放射状エフェクト生成関数
- `isClickableElement()`: ボタン要素干渉防止判定
- 放射状分布アルゴリズム: `(i / heartCount) * Math.PI * 2` による等角度配置
- 軌跡エフェクト: タッチ移動時の軽量パーティクル生成

**🎮 CHAOSモード強化**
- ✅ パーティクル数2.5倍増加
- ✅ 上昇ハートフロー効果
- ✅ レインボーカラーエフェクト
- ⏳ レベル1-6の質問追加（Grokで作成予定）

### 現在の開発状況
**技術実装**: 🟢 完全完了 - アプリは完全に動作可能
**コンテンツ**: 🟡 CHAOSモードの質問レベル1-6のみ未完了（Grok対応予定）

### アーキテクチャ現状
```
✅ 完成済み機能:
├── フルスクリーンタッチエフェクト
├── 放射状パーティクル拡散
├── CHAOSモード技術実装
├── モバイル最適化UI
├── パスワード保護システム
└── モジュラーCSS構造

⏳ 残存タスク:
└── CHAOSモード質問データ(レベル1-6) ← Grok作成予定
```